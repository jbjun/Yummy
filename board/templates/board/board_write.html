{% extends 'base.html' %}
{% block content %}

<form action="" method="POST">
    {% csrf_token %}
    <div class="card">
        <div class="card-header">
            {{ form.title }}
        </div>
        <div>
            {{ form.contents }}
        </div>
    </div>

    <div class="text-right">
        {% if edit %}
        <button type="submit" class="btn btn-sm">{{ edit }}</button>
        {% else %}
        <button type="submit" id="write" class="btn btn-sm">작성하기</button>
        {% endif %}
    </div>
</form>


<script type="text/javascript">
    var checkUnload = true;
    $(window).on('beforeunload', function () {
        if (checkUnload) return "이 페이지를 벗어나면 작성된 내용은 저장되지 않습니다.";
    });
    $("#write").on("click", function () {
        checkUnload = false;
        $("submit").submit();
    });
</script>

{% endblock %}